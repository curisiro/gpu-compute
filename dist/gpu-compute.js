!function(e){var t={};function r(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=t,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(o,n,function(t){return e[t]}.bind(null,n));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=8)}([function(e,t,r){"use strict";var o;function n(){if(!o)try{const e=document.createElement("canvas");if(!e)throw new Error("unable to create canvas");const t=e.getContext("webgl2");if(t&&"undefined"!=typeof WebGL2RenderingContext)console.debug("your browser supports WebGL2"),o=t;else{console.debug("your browser doesn't support WebGL2");const t=e.getContext("webgl");if(!t)throw new Error("unable to get context");o=t}}catch(e){throw new Error("unable to get WebGL context from canvas")}return o}Object.defineProperty(t,"__esModule",{value:!0}),t.getMaxRenderBufferSize=t.isWebGL2=t.setWebGLContext=t.getWebGLContext=void 0,t.getWebGLContext=n,t.setWebGLContext=function(e){return o=e||n()},t.isWebGL2=function(){return"undefined"!=typeof WebGL2RenderingContext&&n()instanceof WebGL2RenderingContext};var a=0;t.getMaxRenderBufferSize=function(){if(!a){const e=n();a=e.getParameter(e.MAX_RENDERBUFFER_SIZE)}return a}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ComputeShader=t.passThruFrag=t.passThruVert=void 0;const o=r(0);t.passThruVert="\n#ifdef GL_ES\nprecision mediump float;\nprecision mediump int;\nprecision mediump sampler2D;\n#endif\n\nattribute vec3 a_position;\n\nvoid main() {\n  gl_Position = vec4(a_position, 1.0);\n}",t.passThruFrag="\n#ifdef GL_ES\nprecision mediump float;\nprecision mediump int;\nprecision mediump sampler2D;\n#endif\n\nuniform sampler2D u_tex;\nuniform float u_textureWidth;\n\nvoid main() {\n  gl_FragColor = texture2D(u_tex, gl_FragCoord.xy / u_textureWidth);\n}";t.ComputeShader=class{constructor(e,r,n,a){a=a?o.setWebGLContext(a):o.getWebGLContext(),this.vertShader=this.createVertShader(this.searchAndReplace(n||t.passThruVert,r)),this.fragShader=this.createFragShader(this.searchAndReplace(e,r)),this.program=this.createProgram(this.vertShader,this.fragShader),this.attributeInfo=this.getAttributeInfo(a,this.program),this.uniformInfo=this.getUniformInfo(a,this.program)}delete(){const e=o.getWebGLContext();e.deleteShader(this.vertShader),e.deleteShader(this.fragShader),e.deleteProgram(this.program)}preprocess(e){return(e=(e=(e=e.replace(/\t/g,"    ")).replace(/\r+/gm,"")).replace(/\n{3,}/g,"\n\n")).trim()}createVertShader(e){const t=o.getWebGLContext(),r=t.createShader(t.VERTEX_SHADER);if(!r)throw new Error("unable to create new vertex shader");if(t.shaderSource(r,this.preprocess(e)),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS))throw new Error(`could not compile vertex shader: ${t.getShaderInfoLog(r)}\n\n${e.trim()}`);return r}createFragShader(e){const t=o.getWebGLContext(),r=t.createShader(t.FRAGMENT_SHADER);if(!r)throw new Error("unable to create new fragment shader");if(t.shaderSource(r,this.preprocess(e)),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS))throw new Error(`could not compile fragment shader: ${t.getShaderInfoLog(r)}\n\n${e.trim()}`);return r}createProgram(e,t){const r=o.getWebGLContext();var n=r.createProgram();if(!n)throw new Error("unable to create program");if(r.attachShader(n,e),r.attachShader(n,t),r.linkProgram(n),!r.getProgramParameter(n,r.LINK_STATUS))throw new Error("error in program linking: "+r.getProgramInfoLog(n));return n}searchAndReplace(e,t){if(t)for(var[r,o]of Object.entries(t))e=e.replace(r,o);return e}getAttributeInfo(e,t){const r={},o=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let n=0;n<o;n++){const o=e.getActiveAttrib(t,n);if(null===o)continue;const a=e.getAttribLocation(t,o.name);null!==a&&(r[o.name]={size:o.size,type:o.type,location:a})}return r}getUniformInfo(e,t){const r={},o=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let n=0;n<o;n++){const o=e.getActiveUniform(t,n);if(null===o)continue;const a=e.getUniformLocation(t,o.name);null!==a&&(r[o.name]={size:o.size,type:o.type,location:a})}return r}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.functionStrings=t.sexdecupleTexcoord=t.quadrupleTexcoord=t.doubleTexcoord=t.oneHalfTexcoord=t.oneFourthTexcoord=t.oneSixteenthTexcoord=t.subtractTexcoord=t.addTexcoord=t.texcoord=t.packBooleans=t.unpackBooleans=t.uint16ToVec2=t.vec2ToUint16=t.int16ToVec2=t.vec2ToInt16=t.floatGreaterThanOrEqual=t.floatLessThanOrEqual=t.floatGreaterThan=t.floatLessThan=t.floatNotEquals=t.floatEquals=t.round=void 0,t.round="\nfloat round(float f) {\n  return floor(f + 0.5);\n}".trim(),t.floatEquals="\nfloat floatEquals(float f1, float f2) {\n  return 1.0 - abs(sign(f1 - f2));\n}".trim(),t.floatNotEquals="\nfloat floatNotEquals(float f1, float f2) {\n  return abs(sign(f1 - f2));\n}".trim(),t.floatLessThan="\nfloat floatLessThan(float f1, float f2) {\n  return max(sign(f2 - f1), 0.0);\n}".trim(),t.floatGreaterThan="\nfloat floatGreaterThan(float f1, float f2) {\n  return max(sign(f1 - f2), 0.0);\n}".trim(),t.floatLessThanOrEqual="\nfloat floatLessThanOrEqual(float f1, float f2) {\n  return 1.0 - max(sign(f1 - f2), 0.0);\n}".trim(),t.floatGreaterThanOrEqual="\nfloat floatGreaterThanOrEqual(float f1, float f2) {\n  return 1.0 - max(sign(f2 - f1), 0.0); \n}".trim(),t.vec2ToInt16="\nfloat vec2ToInt16(vec2 v) {\n  return clamp(floor(floor(v.r * 255.0) * 256.0) + floor(v.g * 255.0) - 32767.0, -32767.0, 32768.0);\n}".trim(),t.int16ToVec2="\nvec2 int16ToVec2(float f) {\n  f = clamp(f, -32767.0, 32768.0) + 32767.0; \n  return vec2(floor(f / 256.0), f - floor(f / 256.0) * 256.0) / 255.0; \n}".trim(),t.vec2ToUint16="\nfloat vec2ToUint16(vec2 v) {\n  return clamp(floor(floor(v.r * 255.0) * 256.0) + floor(v.g * 255.0), 0.0, 65535.0);\n}".trim(),t.uint16ToVec2="\nvec2 uint16ToVec2(float f) {\n  f = clamp(f, 0.0, 65535.0); \n  return vec2(floor(f / 256.0), f - floor(f / 256.0) * 256.0) / 255.0; \n}".trim(),t.unpackBooleans="\nvoid unpackBooleans(float f, inout bool arr[8]) {\n  f = floor(f * 255.0);\n  arr[0] = bool(int(1.0 - max(sign(128.0 - f), 0.0)));  \n  f -= (1.0 - max(sign(128.0 - f), 0.0)) * 128.0;\n  arr[1] = bool(int(1.0 - max(sign(64.0 - f), 0.0)));\n  f -= (1.0 - max(sign(64.0 - f), 0.0)) * 64.0;\n  arr[2] = bool(int(1.0 - max(sign(32.0 - f), 0.0)));\n  f -= (1.0 - max(sign(32.0 - f), 0.0)) * 32.0;\n  arr[3] = bool(int(1.0 - max(sign(16.0 - f), 0.0)));\n  f -= (1.0 - max(sign(16.0 - f), 0.0)) * 16.0;\n  arr[4] = bool(int(1.0 - max(sign(8.0 - f), 0.0)));\n  f -= (1.0 - max(sign(8.0 - f), 0.0)) * 8.0;\n  arr[5] = bool(int(1.0 - max(sign(4.0 - f), 0.0)));\n  f -= (1.0 - max(sign(4.0 - f), 0.0)) * 4.0;\n  arr[6] = bool(int(1.0 - max(sign(2.0 - f), 0.0)));\n  f -= (1.0 - max(sign(2.0 - f), 0.0)) * 2.0;\n  arr[7] = bool(int(1.0 - max(sign(1.0 - f), 0.0)));\n}".trim(),t.packBooleans="\nfloat packBooleans(bool arr[8]) {\n  float f = float(int(arr[0])) * 128.0;\n  f += float(int(arr[1])) * 64.0;\n  f += float(int(arr[2])) * 32.0;\n  f += float(int(arr[3])) * 16.0;\n  f += float(int(arr[4])) * 8.0;\n  f += float(int(arr[5])) * 4.0;\n  f += float(int(arr[6])) * 2.0;\n  return (f + float(int(arr[7]))) / 255.0;\n}".trim(),t.texcoord="\nstruct texcoord { float x, y, w; };\n".trim(),t.addTexcoord="\ntexcoord addTexcoord(texcoord t, float f) {\n  t.y = t.y + floor(f / t.w) + floor((t.x + mod(f, t.w)) / t.w);\n  t.x = mod(t.x + f, t.w);\n  return t;\n}".trim(),t.subtractTexcoord="\ntexcoord subtractTexcoord(texcoord t, float f) {\n  t.y = t.y - floor(f / t.w) + floor((t.x - mod(f, t.w)) / t.w);\n  t.x = mod(t.x - f, t.w);\n  return t;\n}".trim(),t.oneSixteenthTexcoord="\ntexcoord oneSixteenthTexcoord(texcoord t) {\n  t.x = floor(t.x / 2.0) + floor(t.w / 2.0) * mod(t.y, 2.0);\n  t.y = floor(t.y / 2.0) + floor(t.x / t.w);\n  t.x = mod(t.x, t.w);\n  t.x = floor(t.x / 2.0) + floor(t.w / 2.0) * mod(t.y, 2.0);\n  t.y = floor(t.y / 2.0) + floor(t.x / t.w);\n  t.x = mod(t.x, t.w);\n  t.x = floor(t.x / 2.0) + floor(t.w / 2.0) * mod(t.y, 2.0);\n  t.y = floor(t.y / 2.0) + floor(t.x / t.w);\n  t.x = mod(t.x, t.w);\n  return t;\n}".trim(),t.oneFourthTexcoord="\ntexcoord oneFourthTexcoord(texcoord t) {\n  t.x = floor(t.x / 2.0) + floor(t.w / 2.0) * mod(t.y, 2.0);\n  t.y = floor(t.y / 2.0) + floor(t.x / t.w);\n  t.x = mod(t.x, t.w);\n  t.x = floor(t.x / 2.0) + floor(t.w / 2.0) * mod(t.y, 2.0);\n  t.y = floor(t.y / 2.0) + floor(t.x / t.w);\n  t.x = mod(t.x, t.w);\n  return t;\n}".trim(),t.oneHalfTexcoord="\ntexcoord oneHalfTexcoord(texcoord t) {\n  t.x = floor(t.x / 2.0) + floor(t.w / 2.0) * mod(t.y, 2.0);\n  t.y = floor(t.y / 2.0) + floor(t.x / t.w);\n  t.x = mod(t.x, t.w);\n  return t;\n}".trim(),t.doubleTexcoord="\ntexcoord doubleTexcoord(texcoord t) {\n  t.x = floor(t.x * 2.0);\n  t.y = floor(t.y * 2.0) + floor(t.x / t.w);\n  t.x = mod(t.x, t.w);\n  return t;\n}".trim(),t.quadrupleTexcoord="\ntexcoord quadrupleTexcoord(texcoord t) {\n  t.x = floor(t.x * 2.0);\n  t.y = floor(t.y * 2.0) + floor(t.x / t.w);\n  t.x = mod(t.x, t.w);\n  t.x = floor(t.x * 2.0);\n  t.y = floor(t.y * 2.0) + floor(t.x / t.w);\n  t.x = mod(t.x, t.w);\n  return t;\n}".trim(),t.sexdecupleTexcoord="\ntexcoord sexdecupleTexcoord(texcoord t) {\n  t.x = floor(t.x * 2.0);\n  t.y = floor(t.y * 2.0) + floor(t.x / t.w);\n  t.x = mod(t.x, t.w);\n  t.x = floor(t.x * 2.0);\n  t.y = floor(t.y * 2.0) + floor(t.x / t.w);\n  t.x = mod(t.x, t.w);\n  t.x = floor(t.x * 2.0);\n  t.y = floor(t.y * 2.0) + floor(t.x / t.w);\n  t.x = mod(t.x, t.w);\n  return t;\n}".trim(),t.functionStrings={round:t.round,floatEquals:t.floatEquals,floatNotEquals:t.floatNotEquals,floatLessThan:t.floatLessThan,floatGreaterThan:t.floatGreaterThan,floatLessThanOrEqual:t.floatLessThanOrEqual,floatGreaterThanOrEqual:t.floatGreaterThanOrEqual,vec2ToInt16:t.vec2ToInt16,int16ToVec2:t.int16ToVec2,vec2ToUint16:t.vec2ToUint16,uint16ToVec2:t.uint16ToVec2,unpackBooleans:t.unpackBooleans,packBooleans:t.packBooleans,texcoord:t.texcoord,addTexcoord:t.addTexcoord,subtractTexcoord:t.subtractTexcoord,oneSixteenthTexcoord:t.oneSixteenthTexcoord,oneFourthTexcoord:t.oneFourthTexcoord,oneHalfTexcoord:t.oneHalfTexcoord,doubleTexcoord:t.doubleTexcoord,quadrupleTexcoord:t.quadrupleTexcoord,sexdecupleTexcoord:t.sexdecupleTexcoord}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RenderTarget=void 0;const o=r(0),n=r(9),a=r(4);class i{constructor(e,t){const r=o.getMaxRenderBufferSize();if(!Number.isInteger(e)||e<1||e>r)throw new Error(`ComputeTarget width of '${e}' is out of range (1 to ${r})`);if(Math.log(e)/Math.log(2)%1!=0)throw new Error(`ComputeTarget width of '${e}' is not a power of two`);this.width=e,this.targetAlpha=t||this.createTarget()}compute(e,t){const r=o.getWebGLContext();return r.useProgram(e.program),this.setBuffers(e,a.getComputeBufferInfo()),t&&this.setUniforms(e,t),r.bindFramebuffer(r.FRAMEBUFFER,this.targetAlpha.framebuffer),r.viewport(0,0,this.width,this.width),r.drawArrays(r.TRIANGLES,0,6),this}transpose(e){if(e.width!==this.width)throw new Error(`scatterFragCoord width: '${e.width}' != RenderTarget width: '${this.width}'`);const t=o.getWebGLContext(),r=n.getTransposeShader();return t.useProgram(r.program),this.setBuffers(r,n.getTransposeBufferInfo(this.width)),this.setUniforms(r,{u_scatterCoord:e,u_sourceTex:this,u_textureWidth:this.width}),t.bindFramebuffer(t.FRAMEBUFFER,this.targetAlpha.framebuffer),t.viewport(0,0,this.width,this.width),t.drawArrays(t.POINTS,0,this.width*this.width),this}pushSomePixels(e,t,r,n,a){if(a.length!==r*n*4)throw new Error("out.length !== "+r*n*4);const i=o.getWebGLContext();i.bindTexture(i.TEXTURE_2D,this.targetAlpha.texture),i.texSubImage2D(i.TEXTURE_2D,0,e,t,r,n,i.RGBA,i.UNSIGNED_BYTE,a),i.bindTexture(i.TEXTURE_2D,null)}pushPixelsRecursively(e,t,r,o,n,a,i){const f=Math.min(Math.max(Math.floor(n/r),1),o);if(this.pushSomePixels(e,t,r,f,a.subarray(0,4*r*f)),o-f<=0)return i();requestAnimationFrame(()=>this.pushPixelsRecursively(e,t+f,r,o-f,n,a.subarray(4*r*f),i))}pushSomePixelsAsync(e,t,r,o,n){return new Promise((a,i)=>{if(n.length!==r*o*4)return i(new Error("out.length !== "+r*o*4));this.pushPixelsRecursively(e,t,r,o,262144,n,()=>a())})}pushTextureData(e){const t=this.width,r=e.length/4,o=4*(r-r%t);if(e.length>4*t*t)throw new Error(`array length of: '${e.length}' overflows: '${4*t*t}'`);if(e.length%4>0)throw new Error(`array length of: '${e.length}' is not a multiple of four`);if(t>=r)return this.pushSomePixels(0,0,Math.min(r,t),Math.max(Math.floor(r/t),1),e);this.pushSomePixels(0,0,Math.min(r,t),Math.max(Math.floor(r/t),1),e.subarray(0,o)),4*t*t>e.length&&this.pushSomePixels(0,Math.floor(r/t),r%t,1,e.subarray(o))}pushTextureDataAsync(e){return new Promise((t,r)=>{const o=this.width,n=e.length/4,a=4*(n-n%o);return e.length>4*o*o?r(new Error(`array length of: '${e.length}' overflows: '${4*o*o}'`)):e.length%4>0?r(new Error(`array length of: '${e.length}' is not a multiple of four`)):void(o>=n?this.pushSomePixelsAsync(0,0,Math.min(n,o),Math.max(Math.floor(n/o),1),e).then(()=>t()).catch(e=>r(e)):4*o*o>e.length?this.pushSomePixelsAsync(0,0,Math.min(n,o),Math.max(Math.floor(n/o),1),e.subarray(0,a)).then(()=>this.pushSomePixelsAsync(0,Math.floor(n/this.width),n%this.width,1,e.subarray(a)).then(()=>t()).catch(e=>r(e))).catch(e=>r(e)):this.pushSomePixelsAsync(0,0,Math.min(n,o),Math.max(Math.floor(n/o),1),e.subarray(0,a)).then(()=>t()).catch(e=>r(e)))})}readPixels(e){return this.readSomePixels(0,0,this.width,this.width,e)}readPixelsAsync(e){return this.readSomePixelsAsync(0,0,this.width,this.width,e)}readSomePixels(e,t,r,n,a){a||(a=new Uint8Array(r*n*4));const i=o.getWebGLContext();return i.bindFramebuffer(i.FRAMEBUFFER,this.targetAlpha.framebuffer),i.readPixels(e,t,r,n,i.RGBA,i.UNSIGNED_BYTE,a),i.bindFramebuffer(i.FRAMEBUFFER,null),a}readPixelsRecursively(e,t,r,o,n,a,i){const f=Math.min(Math.max(Math.floor(n/r),1),o);if(this.readSomePixels(e,t,r,f,a.subarray(0,4*r*f)),o-f<=0)return i();requestAnimationFrame(()=>this.readPixelsRecursively(e,t+f,r,o-f,n,a.subarray(4*r*f),i))}readSomePixelsAsync(e,t,r,o,n){return new Promise((a,i)=>{if(n||(n=new Uint8Array(r*o*4)),n.length!==r*o*4)return i(new Error("out.length !== "+r*o*4));this.readPixelsRecursively(e,t,r,o,262144,n,()=>a(n))})}delete(){const e=o.getWebGLContext();e.deleteTexture(this.targetAlpha.texture),e.deleteFramebuffer(this.targetAlpha.framebuffer),this.targetBravo&&(e.deleteTexture(this.targetBravo.texture),e.deleteFramebuffer(this.targetBravo.framebuffer))}getBackbuffer(){return this.targetBravo?new i(this.width,this.targetBravo):null}deleteBackbuffer(){if(this.targetBravo){const e=o.getWebGLContext();e.deleteTexture(this.targetBravo.texture),e.deleteFramebuffer(this.targetBravo.framebuffer)}}setBuffers(e,t){const r=o.getWebGLContext();for(var n in t){const o=t[n].buffer,a=t[n].numComponents,i=e.attributeInfo[n].location;r.bindBuffer(r.ARRAY_BUFFER,o),r.enableVertexAttribArray(i),r.vertexAttribPointer(i,a,r.FLOAT,!1,0,0),r.bindBuffer(r.ARRAY_BUFFER,null)}}setUniforms(e,t){let r=0,n=!1;const a=o.getWebGLContext();for(let o in e.uniformInfo){if(void 0===t[o])continue;if(e.uniformInfo[o].type!==a.SAMPLER_2D)continue;const i=t[o];if(i.targetAlpha.texture===this.targetAlpha.texture&&(n||r++,n=!0),this.targetBravo&&this.targetBravo.texture===i.targetAlpha.texture)throw new Error(`provided uniform: '${o}' cannot be the RenderTarget's backbuffer`)}for(let o in e.uniformInfo){if(void 0===t[o])continue;const n=t[o],i=e.uniformInfo[o].type,f=e.uniformInfo[o].location;switch(i){case a.SAMPLER_2D:if(Array.isArray(n)||"number"==typeof n)throw new Error(`provided uniform: '${o}' is not a WebGLTexture`);a.uniform1i(f,r),a.activeTexture(a.TEXTURE0+r++),a.bindTexture(a.TEXTURE_2D,n.targetAlpha.texture);break;case a.FLOAT:"number"==typeof n?a.uniform1f(f,n):Array.isArray(n)&&a.uniform1fv(f,n);break;case a.FLOAT_VEC2:case a.FLOAT_VEC3:case a.FLOAT_VEC4:throw new Error("uniform vectors are currently unsupported");default:throw new Error(`unsupported uniform type: '${i}'`)}}n&&(this.targetBravo||(this.targetBravo=this.createTarget()),[this.targetAlpha,this.targetBravo]=[this.targetBravo,this.targetAlpha])}createTarget(){const e=o.getWebGLContext(),t=e.createFramebuffer();if(!t)throw new Error("unable to create framebuffer");const r=e.createTexture();if(!r)throw new Error("unable to create texture");return e.bindFramebuffer(e.FRAMEBUFFER,t),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,r),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.width,this.width,0,e.RGBA,e.UNSIGNED_BYTE,null),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0),e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),{framebuffer:t,texture:r}}}t.RenderTarget=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getComputeBufferInfo=t.createBufferInfoFromArrays=void 0;const o=r(0);function n(e){const t=o.getWebGLContext(),r={};for(let o in e){const n=t.createBuffer();if(null===n)throw new Error("unable to create buffer");r[o]={buffer:n,numComponents:e[o].numComponents}}for(let o in r)t.bindBuffer(t.ARRAY_BUFFER,r[o].buffer),t.bufferData(t.ARRAY_BUFFER,e[o].data,t.STATIC_DRAW);return t.bindBuffer(t.ARRAY_BUFFER,null),r}var a;t.createBufferInfoFromArrays=n,t.getComputeBufferInfo=function(){return a||(a=n({a_position:{data:new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]),numComponents:2}})),a}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.packBooleans=t.unpackBooleans=void 0,t.unpackBooleans=function(e){var t=new Array(8);e=Math.min(Math.max(0,Math.round(e)),255);for(var r=0;r<8;r++){var o=Math.pow(2,7-r);e>=o?(t[r]=!0,e-=o):t[r]=!1}return t},t.packBooleans=function(e){for(var t=0,r=0;r<8;r++)e.length>r&&e[r]&&(t+=Math.pow(2,7-r));return t}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.packInt16=t.unpackInt16=t.MIN_INT16=t.MAX_INT16=void 0,t.MAX_INT16=32768,t.MIN_INT16=-32767,t.unpackInt16=function(e,t){return 256*(e=Math.min(Math.max(0,Math.floor(e)),255))+(t=Math.min(Math.max(0,Math.floor(t)),255))-32767},t.packInt16=function(e){var t=new Array(2);return e=Math.min(Math.max(-32767,Math.round(e)),32768)+32767,t[0]=Math.floor(e/256),t[1]=e-256*t[0],t}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.packUint16=t.unpackUint16=t.MIN_UINT16=t.MAX_UINT16=void 0,t.MAX_UINT16=65535,t.MIN_UINT16=0,t.unpackUint16=function(e,t){return 256*(e=Math.min(Math.max(0,Math.floor(e)),255))+(t=Math.min(Math.max(0,Math.floor(t)),255))},t.packUint16=function(e){var t=new Array(2);return e=Math.min(Math.max(0,Math.round(e)),65535),t[0]=Math.floor(e/256),t[1]=e-256*t[0],t}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=r(0),n=r(1),a=r(3),i=r(5),f=r(6),u=r(7),s=r(2);e.exports={setWebGLContext:o.setWebGLContext,getWebGLContext:o.getWebGLContext,isWebGL2:o.isWebGL2,ComputeShader:n.ComputeShader,passThruFrag:n.passThruFrag,passThruVert:n.passThruVert,RenderTarget:a.RenderTarget,packBooleans:i.packBooleans,unpackBooleans:i.unpackBooleans,packInt16:f.packInt16,unpackInt16:f.unpackInt16,MIN_INT16:f.MIN_INT16,MAX_INT16:f.MAX_INT16,packUint16:u.packUint16,unpackUint16:u.unpackUint16,MIN_UINT16:u.MIN_UINT16,MAX_UINT16:u.MAX_UINT16,functionStrings:s.functionStrings};var l=r(0);Object.defineProperty(t,"setWebGLContext",{enumerable:!0,get:function(){return l.setWebGLContext}}),Object.defineProperty(t,"getWebGLContext",{enumerable:!0,get:function(){return l.getWebGLContext}}),Object.defineProperty(t,"isWebGL2",{enumerable:!0,get:function(){return l.isWebGL2}});var c=r(1);Object.defineProperty(t,"ComputeShader",{enumerable:!0,get:function(){return c.ComputeShader}}),Object.defineProperty(t,"passThruFrag",{enumerable:!0,get:function(){return c.passThruFrag}}),Object.defineProperty(t,"passThruVert",{enumerable:!0,get:function(){return c.passThruVert}});var d=r(3);Object.defineProperty(t,"RenderTarget",{enumerable:!0,get:function(){return d.RenderTarget}});var h=r(5);Object.defineProperty(t,"packBooleans",{enumerable:!0,get:function(){return h.packBooleans}}),Object.defineProperty(t,"unpackBooleans",{enumerable:!0,get:function(){return h.unpackBooleans}});var m=r(6);Object.defineProperty(t,"packInt16",{enumerable:!0,get:function(){return m.packInt16}}),Object.defineProperty(t,"unpackInt16",{enumerable:!0,get:function(){return m.unpackInt16}}),Object.defineProperty(t,"MIN_INT16",{enumerable:!0,get:function(){return m.MIN_INT16}}),Object.defineProperty(t,"MAX_INT16",{enumerable:!0,get:function(){return m.MAX_INT16}});var x=r(7);Object.defineProperty(t,"packUint16",{enumerable:!0,get:function(){return x.packUint16}}),Object.defineProperty(t,"unpackUint16",{enumerable:!0,get:function(){return x.unpackUint16}}),Object.defineProperty(t,"MIN_UINT16",{enumerable:!0,get:function(){return x.MIN_UINT16}}),Object.defineProperty(t,"MAX_UINT16",{enumerable:!0,get:function(){return x.MAX_UINT16}});var p=r(2);Object.defineProperty(t,"functionStrings",{enumerable:!0,get:function(){return p.functionStrings}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTransposeShader=t.getTransposeBufferInfo=t.passThruTransposeFrag=t.passThruTransposeVert=void 0;const o=r(0),n=r(4),a=r(1),i=r(2);t.passThruTransposeVert="\n#ifdef GL_ES\nprecision mediump float;\nprecision mediump int;\nprecision mediump sampler2D;\n#endif\n\nuniform sampler2D u_scatterCoord;\nuniform sampler2D u_sourceTex;\nuniform float u_textureWidth;\nattribute vec2 a_position;\nvarying vec4 v_sourceTexel;\n\nfloat vec2ToUint16(vec2 v);\n\nvoid main() {\n  gl_PointSize = 1.0;\n  vec4 destinationTexel = texture2D(u_scatterCoord, vec2(a_position.x + 1.0, a_position.y + 1.0) / 2.0);\n  vec2 destinationCoord = vec2(vec2ToUint16(destinationTexel.rg) + 0.5, vec2ToUint16(destinationTexel.ba) + 0.5);\n  gl_Position = vec4(2.0 * (destinationCoord.xy / u_textureWidth) - vec2(1.0, 1.0), 0.0, 1.0);\n  v_sourceTexel = texture2D(u_sourceTex, vec2(a_position.x + 1.0, a_position.y + 1.0) / 2.0);\n}",t.passThruTransposeFrag="\n#ifdef GL_ES\nprecision mediump float;\nprecision mediump int;\nprecision mediump sampler2D;\n#endif\n\nvarying vec4 v_sourceTexel;\n\nvoid main() {\n  gl_FragColor = v_sourceTexel;\n}";const f=new Array(13);var u;t.getTransposeBufferInfo=function(e){if(e<2||e>4096)throw new Error(`width of '${e}' is out of range (2 to 4096)`);const t=Math.log(e)/Math.log(2);if(t%1!=0)throw new Error(`width of '${e}' is not a power of two`);if(!f[t]){const e=Math.pow(2,t),i=new Float32Array(2*e*e);for(var r=0,o=0;o<e;o++)for(var a=0;a<e;a++)i[r++]=2*(a+.5)/e-1,i[r++]=2*(o+.5)/e-1;const u=n.createBufferInfoFromArrays({a_position:{data:i,numComponents:2}});f[t]=u}return f[t]},t.getTransposeShader=function(){if(u)return u;const e=o.getWebGLContext(),r=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS);if(r<2)throw new Error(`MAX_VERTEX_TEXTURE_IMAGE_UNITS: '${r}' is less than 2`);const n={"float vec2ToUint16(vec2 v);":i.functionStrings.vec2ToUint16};return u=new a.ComputeShader(t.passThruTransposeFrag,n,t.passThruTransposeVert)}}]);